{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst searchParams = {\n  key: '49359598-9a4c243d7cce225cafe13dd3f',\n  image_type: 'photo',\n  per_page: 15,\n  orientation: 'horizontal',\n  safesearch: 'true',\n}\n\nexport default async function queryToPixabayApi(searchData, page) {\n  return await axios.get(\"https://pixabay.com/api/\", {\n    params: {\n      page: page,\n      q: searchData,\n      ...searchParams\n    }\n  });\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\n\nexport default function renderMarkUp(responce) {\n    const markup = responce.map(image => {\n        const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n        return `<li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\"><img class=\"item-image\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n                <ul class = 'image-info'>\n                    <li>\n                        <p class=\"item-likes\"><span class=\"info-accent\">Likes</span>${likes}</p>\n                    </li>\n                    <li>\n                        <p class=\"item-views\"><span class=\"info-accent\">Views</span>${views}</p>\n                    </li>\n                    <li>\n                        <p class=\"item-comments\"><span class=\"info-accent\">Comments</span>${comments}</p>\n                    </li>\n                    <li>\n                        <p class=\"item-downloads\"><span class=\"info-accent\">Downloads</span>${downloads}</p>\n                    </li>\n                </ul>\n        </li>`\n    }).join(\"\");\n    gallery.insertAdjacentHTML('beforeend', markup);\n}","import queryToPixabayApi from './js/pixabay-api';\nimport renderMarkUp from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst lightbox = null;\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst div = document.querySelector('.container');\nconst paginationButton = document.querySelector('.load-more-button');\nlet totalHitsFromPixabay;\nlet page = 1;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const searchData = event.currentTarget.elements.searchText.value.trim();\n\n  if (!validateDataFromForm(searchData)) {\n    return;\n  }\n\n  page = 1;\n\n  loader.classList.remove('js-hidden');\n  paginationButton.classList.add('js-hidden');\n  \n  try {\n    gallery.innerHTML = '';\n    const responce = (await queryToPixabayApi(searchData, page));\n    totalHitsFromPixabay = responce.data.totalHits;\n    const responceFromPixabay = responce.data.hits;\n    uploadForPage(responceFromPixabay);\n    pagination(searchData);\n    validateDataForLightBox(lightbox);\n  } catch (error) {\n    iziToast.info({\n      message: 'Sorry, we have a problems, try later',\n    });\n  };\n});\n\n\nfunction validateDataFromForm(searchData) {\n  if (searchData === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please, input data to search.',\n    });\n    return false;\n  }\n  return true;\n}\n\nfunction validateDataForLightBox (lightbox) {\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a',);\n  }\n}\n\nfunction uploadForPage (responceFromPixabay) {\n  if (!validateDataFromAPI(responceFromPixabay)) {\n    loader.classList.add('js-hidden');\n    form.reset();\n    return;\n  };\n  \n  renderMarkUp(responceFromPixabay);\n  auditForPaginationButton();\n  loader.classList.add('js-hidden');\n  div.classList.remove('center');\n  form.reset();\n}\n\nfunction validateDataFromAPI(responceFromPixabay) {\n  if (responceFromPixabay.length === 0) {\n    iziToast.error({\n      message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return false;\n  }\n  return true;\n}\n\n\nfunction auditForPaginationButton () {\n  if (gallery.children.length < totalHitsFromPixabay) {\n    paginationButton.classList.remove('js-hidden');\n  } else {\n    paginationButton.classList.add('js-hidden');\n    iziToast.error({\n      message: \"We`re sorry, but you`ve reached the end of search results.\"\n    });\n  }\n}\n\nfunction pagination (searchData) {\n  paginationButton.addEventListener('click', async () => {\n    page +=1;\n    paginationButton.classList.add('js-hidden');\n    loader.classList.remove('js-hidden');\n\n    try {\n      const responceFromPixabay = (await queryToPixabayApi(searchData, page)).data.hits;\n      uploadForPage(responceFromPixabay);\n      scrollPage();\n      paginationButton.classList.remove('js-hidden');\n      loader.classList.add('js-hidden');\n    } catch {\n      iziToast.info({\n        message: 'Sorry, we have a problems, try later',\n      });\n    };\n  });\n};\n\nfunction scrollPage() {\n  const image = gallery.querySelector('.gallery-item'); \n  if (image) {\n    const cardHeight = image.getBoundingClientRect().height;\n    window.scrollBy({\n      top: 2 * cardHeight, \n      behavior: 'smooth',\n    });\n  }\n}"],"names":["searchParams","queryToPixabayApi","searchData","page","axios","gallery","renderMarkUp","responce","markup","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","form","loader","div","paginationButton","totalHitsFromPixabay","event","validateDataFromForm","responceFromPixabay","uploadForPage","pagination","validateDataForLightBox","iziToast","validateDataFromAPI","auditForPaginationButton","scrollPage","cardHeight"],"mappings":"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"}